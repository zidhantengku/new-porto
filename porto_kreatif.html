<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Zidhan — Clean Web Portfolio</title>

  <!-- Google Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#050405;
      --muted:#9aa0a6;
      --text:#f7f7f7;
      --white:#ffffff;
      --card-bg: rgba(255,255,255,0.96);
      --glass: rgba(255,255,255,0.03);
      --radius: 14px;
      --shadow-subtle: 0 12px 36px rgba(0,0,0,0.5);
      /* PAGE transition duration (keep JS DUR in sync) */
      --page-trans: 900ms cubic-bezier(.22,1,.36,1);
      --trans: 420ms cubic-bezier(.22,1,.36,1);
      --reveal-ease: cubic-bezier(.16,.84,.28,1);
      --page-inner-ease: cubic-bezier(.2,0.9,.3,1);
      --modal-trans: 320ms cubic-bezier(.2,.9,.3,1);
    }
    *{box-sizing:border-box;margin:0;padding:0}
    html{
      scroll-behavior:smooth;
      scroll-padding-top: 84px;
    }
    body{
      font-family:"Poppins",system-ui,-apple-system,BlinkMacSystemFont,sans-serif;
      background:
        radial-gradient(circle at top left, rgba(255,255,255,0.01), transparent 25%),
        var(--bg);
      color:var(--text);
      min-height:100vh;
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
      overflow-x:hidden;
      line-height:1.56;
      transition: filter 360ms ease;
    }

    .wrapper { max-width:1100px; margin:0 auto; padding:0 1.25rem 4.2rem; }

    /* NAV */
    .nav { position:sticky; top:0; z-index:300; backdrop-filter: blur(6px); background: rgba(0,0,0,0.22); border-bottom: 1px solid rgba(255,255,255,0.03); }
    .nav-inner { max-width:1100px; margin:0 auto; padding:0.85rem 1.25rem; display:flex; align-items:center; justify-content:space-between; gap:1rem; }
    .logo { display:flex; align-items:center; gap:0.7rem; }
    .logo-badge { width:36px; height:36px; border-radius:999px; background: #fff; color:#111; display:grid; place-items:center; font-weight:700; }
    .logo-text { font-size:0.95rem; font-weight:600; color:var(--text); letter-spacing:0.06em; }
    .logo-sub { font-size:0.68rem; color:var(--muted); letter-spacing:0.12em; text-transform:uppercase; }
    .nav-links { display:flex; align-items:center; gap:1.2rem; font-size:0.95rem; }
    .nav-links a { color:var(--muted); text-decoration:none; padding:6px 0; position:relative; }
    .nav-links a.active { color:var(--text); border-bottom:2px solid rgba(255,255,255,0.06); padding-bottom:4px; }
    .nav-cta { padding:0.35rem 0.7rem; border-radius:999px; border:1px solid rgba(255,255,255,0.04); background:transparent; color:var(--text); cursor:pointer; }

    /* GLOBAL section spacing adjustments (more legible) */
    section { padding: 4.2rem 0; }
    .section-subtitle { font-size:0.86rem; text-transform:uppercase; letter-spacing:0.18em; color:var(--muted); margin-bottom:14px; display:block; }
    .section-title { font-size:1.85rem; font-weight:700; margin-bottom:12px; color:var(--text); line-height:1.05; }
    .section-desc { color:var(--muted); max-width:720px; font-size:0.96rem; margin-bottom:18px; }

    /* HERO (clean layout) */
    .hero { min-height: calc(100vh - 84px); display:grid; grid-template-columns: 1fr 420px; gap:3.2rem; align-items:center; padding-top:1.6rem; }
    .hero-left { display:flex; align-items:center; justify-content:flex-start; padding-left: 6px; }
    .mockup-card {
      width: 720px;
      max-width: calc(100% - 24px);
      background: var(--card-bg);
      border-radius: var(--radius);
      box-shadow: var(--shadow-subtle);
      border: 1px solid rgba(0,0,0,0.06);
      padding: 20px;
      transform: translateY(10px);
      opacity:0;
      transition: transform 640ms var(--reveal-ease), opacity 640ms var(--reveal-ease);
    }
    .mockup-card img { width:100%; height:auto; display:block; border-radius:8px; object-fit:cover; filter:grayscale(100%); }

    .hero-right {
      display:flex;
      flex-direction:column;
      align-items:flex-end;
      text-align:right;
      gap:12px;
      padding-right:6px;
    }
    .hero-right .name {
      font-size: clamp(1.95rem, 4.2vw, 3.05rem);
      font-weight:800;
      color: var(--white);
      margin-bottom:4px;
      opacity:0; transform:translateY(10px);
      transition: transform 520ms var(--reveal-ease) 80ms, opacity 520ms var(--reveal-ease) 80ms;
      letter-spacing:-0.01em;
    }
    .hero-right .role {
      color:var(--muted);
      font-weight:500;
      opacity:0; transform:translateY(10px);
      transition: transform 520ms var(--reveal-ease) 160ms, opacity 520ms var(--reveal-ease) 160ms;
    }
    .hero-right .short {
      color:var(--muted);
      max-width:320px;
      font-size:0.95rem;
      opacity:0; transform:translateY(10px);
      transition: transform 520ms var(--reveal-ease) 240ms, opacity 520ms var(--reveal-ease) 240ms;
    }
    .hero-actions { margin-top:14px; display:flex; gap:0.6rem; }

    .hero-animate .mockup-card { transform: translateY(0); opacity:1; }
    .hero-animate .name { transform:translateY(0); opacity:1; }
    .hero-animate .role { transform:translateY(0); opacity:1; }
    .hero-animate .short { transform:translateY(0); opacity:1; }

    /* Projects & cards */
    .projects-grid { margin-top: 1.4rem; display:grid; grid-template-columns:repeat(3, minmax(0, 1fr)); gap: 16px; }
    .project-card { border-radius:12px; background: rgba(255,255,255,0.02); border:1px solid rgba(255,255,255,0.03); padding:18px; cursor:pointer; min-height:130px; display:flex; flex-direction:column; justify-content:space-between; transition: transform var(--trans), box-shadow var(--trans); }
    .project-card:hover { transform: translateY(-6px); box-shadow: 0 18px 40px rgba(0,0,0,0.45); }

    /* Certificates grid (replaces Contact) */
    .cert-grid { display:grid; grid-template-columns:repeat(3, 1fr); gap:18px; margin-top:12px; }
    .cert-card {
      background: rgba(255,255,255,0.02);
      border: 1px solid rgba(255,255,255,0.03);
      padding:18px;
      border-radius:12px;
      cursor:pointer;
      transition: transform 220ms ease, box-shadow 220ms ease;
      min-height:110px;
      display:flex;
      align-items:center;
      justify-content:center;
    }
    .cert-card:hover { transform: translateY(-6px); box-shadow: 0 16px 36px rgba(0,0,0,0.45); }
    .cert-card h4 { margin:0; color:var(--white); font-size:1rem; text-align:center; }

    /* page overlay */
    #pages { position:fixed; inset:0; z-index:160; pointer-events:none; }
    .page { position:absolute; inset:0; padding-top:84px; background: linear-gradient(180deg,#020203,#070608); transform:translateX(100%); opacity:0; transition: transform var(--page-trans), opacity calc(var(--page-trans)/1.05); will-change:transform,opacity; overflow:auto; display:flex; flex-direction:column; pointer-events:auto; }

    /* visible */
    .page.open { transform:translateX(0); opacity:1; }

    /* closing directional classes */
    .page.exit-left { transform:translateX(-100%); opacity:0; transition: transform var(--page-trans), opacity calc(var(--page-trans)/1.05); }
    .page.exit-right { transform:translateX(100%); opacity:0; transition: transform var(--page-trans), opacity calc(var(--page-trans)/1.05); }

    .page-topbar { position:fixed; top:0; left:0; right:0; height:84px; display:flex; align-items:center; justify-content:space-between; padding:0 1.2rem; border-bottom:1px solid rgba(255,255,255,0.03); z-index:165; background: linear-gradient(180deg, rgba(0,0,0,0), rgba(0,0,0,0.02)); }
    .page-inner { max-width:1180px; margin:1.6rem auto; padding:1.2rem; width:100%; display:grid; grid-template-columns:1fr 300px; gap:1rem; align-items:start; }

    /* inner content animation */
    .page .hero-image,
    .page .page-side,
    .page .page-body {
      transform: translateY(16px);
      opacity: 0;
      transition: transform 640ms var(--page-inner-ease), opacity 640ms var(--page-inner-ease);
    }
    .page.open .hero-image { transform: translateY(0); opacity:1; transition-delay: 140ms; }
    .page.open .page-side  { transform: translateY(0); opacity:1; transition-delay: 220ms; }
    .page.open .page-body  { transform: translateY(0); opacity:1; transition-delay: 300ms; }

    .hero-image { border-radius:12px; overflow:hidden; border:1px solid rgba(255,255,255,0.04); height:520px; background:#111; display:flex; align-items:center; justify-content:center; }
    .hero-image img { width:100%; height:100%; object-fit:cover; display:block; }

    .page-side { background:rgba(255,255,255,0.02); border-radius:10px; padding:0.9rem; border:1px solid rgba(255,255,255,0.03); min-height:200px; }
    .page-title { font-size:1.6rem; margin-bottom:.4rem; color:var(--text); }
    .page-meta { color:var(--muted); margin-bottom:.6rem; }
    .page-body { color:var(--muted); line-height:1.6; white-space:pre-wrap; margin-top:0.8rem; }

    /* Certificates modal (no background blur) */
    #cert-modal {
      position:fixed;
      inset:0;
      display:grid;
      place-items:center;
      z-index:600;
      pointer-events:none;
      opacity:0;
      transition: opacity var(--modal-trans) ease;
    }
    #cert-modal.open {
      pointer-events:auto;
      opacity:1;
    }
    .cert-backdrop {
      position:absolute;
      inset:0;
      background: rgba(0,0,0,0.65); /* darker overlay but no blur */
      opacity:0;
      transform: scale(.98);
      transition: opacity var(--modal-trans) var(--modal-trans), transform var(--modal-trans) var(--modal-trans);
    }
    #cert-modal.open .cert-backdrop { opacity:1; transform: scale(1); }

    .cert-content {
      position:relative;
      width:min(920px, 92%);
      max-height:86vh;
      border-radius:12px;
      overflow:hidden;
      background: linear-gradient(180deg, #0b0b0b, #0f0f0f);
      box-shadow: 0 30px 80px rgba(0,0,0,0.7);
      transform: translateY(12px) scale(.98);
      opacity:0;
      transition: transform var(--modal-trans) var(--modal-trans), opacity var(--modal-trans) var(--modal-trans);
      display:flex;
      flex-direction:column;
      pointer-events:auto;
    }
    #cert-modal.open .cert-content { transform: translateY(0) scale(1); opacity:1; }

    .cert-header { padding:12px 16px; border-bottom: 1px solid rgba(255,255,255,0.03); display:flex; justify-content:space-between; align-items:center; }
    .cert-header h3 { margin:0; font-size:1.05rem; color:var(--white); }
    .cert-body { padding:12px; display:flex; justify-content:center; align-items:center; background:#070707; }
    .cert-body img { max-width:100%; max-height:70vh; object-fit:contain; display:block; border-radius:6px; }

    .cert-close {
      background:transparent; border:1px solid rgba(255,255,255,0.06); color:var(--white); padding:.4rem .7rem; border-radius:8px; cursor:pointer;
    }

    /* reveal helper (smoother) */
    .reveal { opacity:0; transform:translateY(10px); transition: opacity 640ms var(--reveal-ease), transform 640ms var(--reveal-ease); }
    .reveal.visible { opacity:1; transform:translateY(0); }

    /* responsive */
    @media (max-width:1000px) {
      .hero { grid-template-columns: 1fr; gap:1.4rem; padding-top:1rem; }
      .hero-left { justify-content:center; }
      .hero-right { align-items:center; text-align:center; }
      .projects-grid { grid-template-columns:repeat(2,1fr); }
      .mockup-card { width:100%; }
      section { padding:3rem 0; }
      .section-title { font-size:1.6rem; }
      .cert-grid { grid-template-columns:repeat(2,1fr); }
    }
    @media (max-width:640px) {
      .projects-grid { grid-template-columns:1fr; }
      .nav-links { display:none; }
      .mockup-card { padding:12px; }
      section { padding:2.2rem 0; }
      .section-title { font-size:1.4rem; }
      .cert-grid { grid-template-columns:1fr; }
      html{ scroll-padding-top:72px; }
    }
  </style>
</head>
<body>
  <!-- NAV -->
  <header class="nav">
    <div class="nav-inner">
      <div class="logo">
        <div class="logo-badge">Z</div>
        <div>
          <div class="logo-text">ZIDHAN</div>
          <div class="logo-sub">FUN WEB PORTFOLIO</div>
        </div>
      </div>

      <nav class="nav-links" aria-label="Main navigation">
        <a href="#home" class="active">Home</a>
        <a href="#about">About</a>
        <a href="#projects">Projects</a>
        <a href="#certificates">Certificates</a>
      </nav>

      <button class="nav-cta" onclick="document.querySelector('#certificates').scrollIntoView({behavior:'smooth'})">Let's chat</button>
    </div>
  </header>

  <!-- MAIN -->
  <main id="mainContent" class="wrapper">
    <!-- HERO -->
    <section id="home" class="hero reveal" aria-label="Home">
      <div class="hero-left">
        <div class="mockup-card" id="mockupCard" role="img" aria-label="Project mockup">
          <div style="color:#666;font-size:0.92rem;margin-bottom:10px">Personal brand website design</div>
          <img src="images/projects/glass-thumb.jpg" alt="Project mockup">
        </div>
      </div>

      <div class="hero-right" id="heroRight">
        <div class="name">Zidhan Tengku</div>
        <div class="role">Web Developer — Clean & Minimal Portfolio</div>
        <div class="short">I build simple, strong visual websites. Click “See my work” to view projects or scroll to learn more.</div>

        <div class="hero-actions" style="margin-top:16px">
          <a href="#projects" class="nav-cta" style="text-decoration:none">See my work</a>
          <a href="#about" class="nav-cta" style="text-decoration:none">About</a>
        </div>
      </div>
    </section>

    <!-- ABOUT -->
    <section id="about" class="reveal" style="margin-top:2.2rem">
      <span class="section-subtitle">About</span>
      <h2 class="section-title">Who am I?</h2>
      <p class="section-desc">I'm a front-end developer who loves clean layouts, thoughtful spacing, and subtle motion. I keep interfaces minimal and accessible — focusing on clarity & performance.</p>

      <div class="whatido-grid" style="margin-top:1.2rem; display:grid; grid-template-columns:repeat(3,1fr); gap:12px;">
        <div class="project-card reveal"><strong>UI Development</strong><p style="color:var(--muted);margin-top:8px">Semantic HTML, responsive CSS, accessible patterns.</p></div>
        <div class="project-card reveal"><strong>Motion</strong><p style="color:var(--muted);margin-top:8px">Subtle micro-interactions to guide attention.</p></div>
        <div class="project-card reveal"><strong>Performance</strong><p style="color:var(--muted);margin-top:8px">Lightweight builds, optimized assets.</p></div>
      </div>
    </section>

    <!-- PROJECTS -->
    <section id="projects" class="reveal" style="margin-top:2.2rem">
      <span class="section-subtitle">Projects</span>
      <h2 class="section-title">Selected Work</h2>
      <p class="section-desc">Click a card to open a full-page project view with thumbnail and short explanation.</p>

      <div class="projects-grid" id="projectsGrid" style="margin-top:1rem;">
        <article class="project-card" data-id="glass" tabindex="0">
          <div>
            <div style="color:var(--muted);font-size:.78rem">UI Experiment</div>
            <h3 style="margin-top:.4rem;font-size:1.05rem">Glassmorphism Landing Page</h3>
            <p style="color:var(--muted);margin-top:.6rem;font-size:.9rem">Playful landing with glass layers & micro-interactions.</p>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:.6rem">
            <div style="display:flex;gap:.4rem"><span style="color:var(--muted);font-size:.82rem">HTML</span><span style="color:var(--muted);font-size:.82rem">CSS</span></div>
            <div style="color:var(--muted);font-weight:600">Open ↗</div>
          </div>
        </article>

        <article class="project-card" data-id="dashboard" tabindex="0">
          <div>
            <div style="color:var(--muted);font-size:.78rem">Dashboard</div>
            <h3 style="margin-top:.4rem;font-size:1.05rem">Minimal Analytics Panel</h3>
            <p style="color:var(--muted);margin-top:.6rem;font-size:.9rem">Card-based analytics with lightweight charts.</p>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:.6rem">
            <div style="display:flex;gap:.4rem"><span style="color:var(--muted);font-size:.82rem">CSS Grid</span></div>
            <div style="color:var(--muted);font-weight:600">Open ↗</div>
          </div>
        </article>

        <article class="project-card" data-id="portfolio" tabindex="0">
          <div>
            <div style="color:var(--muted);font-size:.78rem">Portfolio</div>
            <h3 style="margin-top:.4rem;font-size:1.05rem">Fun Web Port</h3>
            <p style="color:var(--muted);margin-top:.6rem;font-size:.9rem">This site — clean, minimal, and editable.</p>
          </div>
          <div style="display:flex;justify-content:space-between;align-items:center;margin-top:.6rem">
            <div style="display:flex;gap:.4rem"><span style="color:var(--muted);font-size:.82rem">HTML</span><span style="color:var(--muted);font-size:.82rem">CSS</span></div>
            <div style="color:var(--muted);font-weight:600">Open ↗</div>
          </div>
        </article>
      </div>
    </section>

    <!-- CERTIFICATES (replaces Contact) -->
    <section id="certificates" class="reveal" style="margin-top:2.2rem">
      <span class="section-subtitle">Certificates</span>
      <h2 class="section-title">My Certificates</h2>
      <p class="section-desc">Click a certificate to view a larger image.</p>

      <div class="cert-grid" id="certGrid">
        <div class="cert-card" tabindex="0" role="button" data-src="images/certs/cert1.jpg" data-title="Certificate 1">
          <h4>Certificate 1</h4>
        </div>
        <div class="cert-card" tabindex="0" role="button" data-src="images/certs/cert2.jpg" data-title="Certificate 2">
          <h4>Certificate 2</h4>
        </div>
        <div class="cert-card" tabindex="0" role="button" data-src="images/certs/cert3.jpg" data-title="Certificate 3">
          <h4>Certificate 3</h4>
        </div>
        <div class="cert-card" tabindex="0" role="button" data-src="images/certs/cert4.jpg" data-title="Certificate 4">
          <h4>Certificate 4</h4>
        </div>
        <div class="cert-card" tabindex="0" role="button" data-src="images/certs/cert5.jpg" data-title="Certificate 5">
          <h4>Certificate 5</h4>
        </div>
        <div class="cert-card" tabindex="0" role="button" data-src="images/certs/cert6.jpg" data-title="Certificate 6">
          <h4>Certificate 6</h4>
        </div>
      </div>
    </section>
  </main>

  <!-- PAGES -->
  <div id="pages" aria-hidden="true">
    <div id="page-glass" class="page" data-id="glass" aria-hidden="true">
      <div class="page-topbar">
        <div>
          <div class="page-title">Glassmorphism Landing Page</div>
          <div class="page-meta">UI Experiment · 2025</div>
        </div>
        <div style="display:flex;gap:.6rem;align-items:center">
          <button class="btn" data-action="prev">Prev</button>
          <button class="btn" data-action="close">Back to projects</button>
          <button class="btn" data-action="next">Next</button>
        </div>
      </div>

      <div class="page-inner">
        <div>
          <div class="hero-image"><img src="images/projects/glass-thumb.jpg" alt="Glass thumbnail"></div>
          <div class="page-body">
Goal: Create a playful landing page with glass-style UI.
Tech: HTML, CSS (Glassmorphism), JS (micro-interactions).
Role: Design + Frontend implementation.

Replace this description with your real case study.
          </div>
        </div>

        <aside class="page-side">
          <div style="font-weight:700">Snapshot</div>
          <div style="color:var(--muted);margin-top:.6rem">Layered glass cards & smooth scrolling.</div>
        </aside>
      </div>
    </div>

    <div id="page-dashboard" class="page" data-id="dashboard" aria-hidden="true">
      <div class="page-topbar">
        <div>
          <div class="page-title">Minimal Analytics Panel</div>
          <div class="page-meta">Dashboard · 2024</div>
        </div>
        <div style="display:flex;gap:.6rem;align-items:center">
          <button class="btn" data-action="prev">Prev</button>
          <button class="btn" data-action="close">Back to projects</button>
          <button class="btn" data-action="next">Next</button>
        </div>
      </div>

      <div class="page-inner">
        <div>
          <div class="hero-image"><img src="images/projects/dashboard-thumb.jpg" alt="Dashboard thumbnail"></div>
          <div class="page-body">
Goal: Provide lightweight analytics UX.
Tech: CSS Grid, responsive cards, placeholder charts.
Role: Frontend.
          </div>
        </div>

        <aside class="page-side">
          <div style="font-weight:700">Snapshot</div>
          <div style="color:var(--muted);margin-top:.6rem">Card-based layout & placeholders.</div>
        </aside>
      </div>
    </div>

    <div id="page-portfolio" class="page" data-id="portfolio" aria-hidden="true">
      <div class="page-topbar">
        <div>
          <div class="page-title">Fun Web Port</div>
          <div class="page-meta">Portfolio · 2025</div>
        </div>
        <div style="display:flex;gap:.6rem;align-items:center">
          <button class="btn" data-action="prev">Prev</button>
          <button class="btn" data-action="close">Back to projects</button>
          <button class="btn" data-action="next">Next</button>
        </div>
      </div>

      <div class="page-inner">
        <div>
          <div class="hero-image"><img src="images/projects/portfolio-thumb.jpg" alt="Portfolio thumbnail"></div>
          <div class="page-body">
This portfolio itself — explain decisions, performance considerations, and how to customize.
          </div>
        </div>

        <aside class="page-side">
          <div style="font-weight:700">Snapshot</div>
          <div style="color:var(--muted);margin-top:.6rem">Single-file portfolio, editable & minimal.</div>
        </aside>
      </div>
    </div>
  </div>

  <!-- Certificates modal (no blur) -->
  <div id="cert-modal" aria-hidden="true" role="dialog" aria-modal="true">
    <div class="cert-backdrop" data-action="close"></div>
    <div class="cert-content" role="document" aria-labelledby="certTitle">
      <div class="cert-header">
        <h3 id="certTitle">Certificate</h3>
        <button class="cert-close" data-action="close">Close</button>
      </div>
      <div class="cert-body">
        <img id="certImage" src="" alt="Certificate preview">
      </div>
    </div>
  </div>

  <footer style="margin-top:2.4rem;">
    <div class="wrapper" style="display:flex;justify-content:space-between;align-items:center;padding:12px 1.25rem;color:var(--muted)">
      <span>© <span id="year"></span> <strong style="color:var(--text)">Zidhan</strong>. Clean & minimal.</span>
      <span style="color:var(--muted)">Edit freely in VS Code.</span>
    </div>
  </footer>

  <script>
    // dynamic year
    document.getElementById('year').textContent = new Date().getFullYear();

    // reveal animations
    const revealEls = document.querySelectorAll('.reveal');
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if(entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.12 });
    revealEls.forEach(el => observer.observe(el));

    // HERO animate trigger
    const hero = document.getElementById('home');
    const heroObserver = new IntersectionObserver((entries) => {
      entries.forEach(e => {
        if(e.isIntersecting) {
          hero.classList.add('hero-animate');
          heroObserver.unobserve(hero);
        }
      });
    }, { threshold: 0.18 });
    heroObserver.observe(hero);

    // Navbar active link on scroll
    const sections = document.querySelectorAll('section[id]');
    const navLinks = document.querySelectorAll('.nav-links a');
    function onScroll() {
      const scrollPos = window.scrollY + 120;
      sections.forEach(section => {
        const top = section.offsetTop;
        const height = section.offsetHeight;
        const id = section.getAttribute('id');
        if(scrollPos >= top && scrollPos < top + height) {
          navLinks.forEach(link => link.classList.toggle('active', link.getAttribute('href') === `#${id}`));
        }
      });
    }
    window.addEventListener('scroll', onScroll);
    onScroll();

    // Projects full-page logic (smoother transitions, no background blur)
    const order = ['glass','dashboard','portfolio'];
    const pages = {};
    order.forEach(id => pages[id] = document.getElementById('page-' + id));
    const mainEl = document.getElementById('mainContent');
    let current = null;
    const DUR = 900; // match --page-trans (900ms)
    let isAnimating = false;

    function resetPage(el) {
      el.classList.remove('open','exit-left','exit-right');
      el.style.transition = '';
      el.style.transform = '';
      el.style.opacity = '';
      el.setAttribute('aria-hidden','true');
    }

    function performPageSwitch(prevId, targetId, dirForTarget, push=true) {
      if(isAnimating) return;
      isAnimating = true;

      const prev = prevId ? pages[prevId] : null;
      const target = pages[targetId];
      if(!target) { isAnimating = false; return; }

      // Prepare target
      target.classList.remove('open','exit-left','exit-right');
      target.style.transition = 'none';
      target.style.transform = dirForTarget === 'left' ? 'translateX(-100%)' : 'translateX(100%)';
      target.style.opacity = '0';
      target.setAttribute('aria-hidden','false');
      void target.offsetWidth;

      // animate prev out
      if(prev) {
        prev.classList.remove('open');
        if(dirForTarget === 'right') {
          prev.classList.add('exit-left');
        } else {
          prev.classList.add('exit-right');
        }

        const onPrevEnd = (ev) => {
          if(ev.target !== prev) return;
          prev.removeEventListener('transitionend', onPrevEnd);
          resetPage(prev);

          // bring in target
          requestAnimationFrame(()=> {
            target.style.transition = '';
            target.classList.add('open');
            target.style.transform = '';
            target.style.opacity = '';
          });

          setTimeout(()=> {
            current = targetId;
            if(push) history.pushState({project:targetId}, '', `#project=${targetId}`);
            isAnimating = false;
            const btn = target.querySelector('[data-action="close"]');
            if(btn) btn.focus();
          }, DUR + 10);
        };

        prev.addEventListener('transitionend', onPrevEnd);

      } else {
        // no prev: simply open target
        requestAnimationFrame(()=> {
          target.style.transition = '';
          target.classList.add('open');
          target.style.transform = '';
          target.style.opacity = '';
        });
        setTimeout(()=> {
          current = targetId;
          if(push) history.pushState({project:targetId}, '', `#project=${targetId}`);
          isAnimating = false;
          const btn = target.querySelector('[data-action="close"]');
          if(btn) btn.focus();
        }, DUR + 10);
      }
    }

    function openPage(id, dir='right', push=true) {
      if(!pages[id]) return;
      if(current === id) return;
      // add subtle dim (no blur) by reducing opacity of main content
      mainEl.style.transition = 'opacity 300ms ease';
      mainEl.style.opacity = '0.18';
      const prevId = current;
      performPageSwitch(prevId, id, dir, push);
    }

    function closePage(push=true) {
      if(!current) return;
      if(isAnimating) return;
      isAnimating = true;
      const cur = pages[current];
      cur.classList.remove('open');
      cur.classList.add('exit-right');

      // restore main opacity
      mainEl.style.opacity = '';
      setTimeout(()=> { mainEl.style.transition = ''; }, 350);

      const onCurEnd = (ev) => {
        if(ev.target !== cur) return;
        cur.removeEventListener('transitionend', onCurEnd);
        resetPage(cur);
        current = null;
        isAnimating = false;
        if(push) {
          history.pushState({}, '', '#projects');
          // scroll to projects smoothly after transition
          const projectsSection = document.getElementById('projects');
          if(projectsSection) {
            projectsSection.scrollIntoView({behavior:'smooth'});
          }
        }
      };
      cur.addEventListener('transitionend', onCurEnd);
    }

    // open from grid
    document.getElementById('projectsGrid').addEventListener('click', (e) => {
      const card = e.target.closest('.project-card');
      if(!card) return;
      const id = card.dataset.id;
      openPage(id,'right', true);
    });

    document.querySelectorAll('.project-card').forEach(card=>{
      card.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' ') { e.preventDefault(); openPage(card.dataset.id,'right', true); }
      });
    });

    document.querySelectorAll('.page').forEach(p => {
      p.addEventListener('click', (e) => {
        const btn = e.target.closest('[data-action]');
        if(!btn) return;
        const action = btn.dataset.action;
        const id = p.dataset.id;
        if(action === 'close') {
          closePage(true);
        }
        if(action === 'prev') {
          const idx = order.indexOf(id);
          const prev = order[(idx - 1 + order.length) % order.length];
          openPage(prev,'left', true);
        }
        if(action === 'next') {
          const idx = order.indexOf(id);
          const next = order[(idx + 1) % order.length];
          openPage(next,'right', true);
        }
      });
    });

    window.addEventListener('keydown', (e) => {
      if(!current || isAnimating) return;
      if(e.key === 'Escape') closePage(true);
      if(e.key === 'ArrowLeft') {
        const idx = order.indexOf(current);
        const prev = order[(idx - 1 + order.length) % order.length];
        openPage(prev, 'left', true);
      }
      if(e.key === 'ArrowRight') {
        const idx = order.indexOf(current);
        const next = order[(idx + 1) % order.length];
        openPage(next,'right', true);
      }
    });

    window.addEventListener('popstate', () => {
      const id = getProjectFromHash();
      if(id && pages[id]) openPage(id,'right', false);
      else closePage(false);
    });

    function getProjectFromHash(){
      const h = location.hash || '';
      if(h.startsWith('#project=')) return h.split('=')[1];
      return null;
    }

    const initial = getProjectFromHash();
    if(initial && pages[initial]) setTimeout(()=> openPage(initial,'right', false), 120);

    document.addEventListener('focusin', (e) => {
      if(current) {
        const p = pages[current];
        if(p && !p.contains(e.target)) {
          const btn = p.querySelector('[data-action="close"]');
          if(btn) btn.focus();
        }
      }
    });

    // === Certificates modal logic (no blur) ===
    const certGrid = document.getElementById('certGrid');
    const certModal = document.getElementById('cert-modal');
    const certImage = document.getElementById('certImage');
    const certTitle = document.getElementById('certTitle');

    function openCert(src, title) {
      certImage.src = src;
      certImage.alt = title;
      certTitle.textContent = title;
      certModal.classList.add('open');
      certModal.setAttribute('aria-hidden','false');
      setTimeout(()=> {
        const closeBtn = certModal.querySelector('[data-action="close"]');
        if(closeBtn) closeBtn.focus();
      }, 120);
    }

    function closeCert() {
      certModal.classList.remove('open');
      certModal.setAttribute('aria-hidden','true');
      setTimeout(()=> {
        certImage.src = '';
        certTitle.textContent = 'Certificate';
      }, 300);
    }

    certGrid.addEventListener('click', (e) => {
      const card = e.target.closest('.cert-card');
      if(!card) return;
      const src = card.dataset.src;
      const title = card.dataset.title || 'Certificate';
      openCert(src, title);
    });

    document.querySelectorAll('.cert-card').forEach(c=>{
      c.addEventListener('keydown', (e) => {
        if(e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          const src = c.dataset.src;
          const title = c.dataset.title || 'Certificate';
          openCert(src, title);
        }
      });
    });

    certModal.addEventListener('click', (e) => {
      const act = e.target.closest('[data-action]');
      if(act && act.dataset.action === 'close') closeCert();
      if(e.target.classList.contains('cert-backdrop')) closeCert();
    });

    window.addEventListener('keydown', (e) => {
      if(certModal.classList.contains('open') && e.key === 'Escape') closeCert();
    });

    certModal.addEventListener('wheel', (e)=> { if(certModal.classList.contains('open')) e.preventDefault(); }, {passive:false});

    // fallback fake handler kept
    function handleSubmit(e){
      e.preventDefault();
      const fs = document.getElementById('form-status');
      if(fs) {
        fs.textContent = 'Thanks! This form is a demo — connect it to your backend.';
        setTimeout(()=> fs.textContent = '', 4000);
      }
      if(e.target) e.target.reset();
    }
  </script>
</body>
</html>
